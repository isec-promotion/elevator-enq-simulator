# エレベーター監視システム動画生成

このフォルダには、エレベーター監視システムのデモ動画を生成するプログラムが含まれています。

## 生成される動画

- **解像度**: 1920x1080 (1080p)
- **フレームレート**: 30fps
- **動画時間**: 30 秒
- **ファイル形式**: MP4
- **ファイルサイズ**: 約 13-15MB

## 動画の内容

動画には以下の要素が含まれます：

1. **エレベーター監視システムの UI**

   - タイトル表示
   - 現在時刻
   - 接続状態
   - 解像度情報

2. **エレベーターの動作シナリオ**

   - 1 階から 3 階への移動
   - 3 階から地下 1 階への移動
   - 地下 1 階から 2 階への移動
   - 待機状態

3. **リアルタイム情報**

   - 現在階表示
   - 行先階表示（移動中）
   - 荷重情報
   - 移動フェーズ（待機中/移動中/着床）

4. **通信ログ**

   - ENQ 受信ログの表示
   - 時系列での状態変化

5. **プログレスバー**
   - 動画の進行状況表示

## 使用方法

### 1. 必要なライブラリのインストール

```cmd
cd video
pip install -r requirements.txt
```

### 2. 動画生成の実行

```cmd
python elevator_video_generator.py
```

### 3. 生成される動画ファイル

実行すると、以下の形式でファイル名が生成されます：

```
elevator_demo_YYYYMMDD_HHMMSS.mp4
```

例：`elevator_demo_20250825_162524.mp4`

## 必要なライブラリ

- **opencv-python**: 動画ファイルの生成
- **Pillow**: 画像処理とテキスト描画
- **numpy**: 数値計算

## 動画の特徴

### エレベーターシナリオ

1. **1 階 →3 階移動** (8 秒)

   - 待機 → 移動 → 着床
   - 荷重: 850kg

2. **3 階 → 地下 1 階移動** (10 秒)

   - 待機 → 移動 → 着床
   - 荷重: 1200kg

3. **地下 1 階 →2 階移動** (8 秒)

   - 待機 → 移動 → 着床
   - 荷重: 650kg

4. **待機状態** (4 秒)
   - 2 階で待機
   - 荷重: 0kg

### 視覚的要素

- **状態に応じた色分け**

  - 移動中: 黄色背景
  - 停止中: 緑色背景
  - 待機中: 青色背景

- **日本語フォント対応**

  - Windows: MS Gothic
  - Linux: IPA フォント
  - macOS: Hiragino Sans

- **リアルタイム更新**
  - 通信ログの段階的表示
  - 時刻の更新
  - プログレスバーの進行

## トラブルシューティング

### フォントが表示されない場合

システムに日本語フォントがインストールされていない場合、デフォルトフォントが使用されます。以下のフォントパスが確認されます：

- Windows: `C:/Windows/Fonts/msgothic.ttc`
- Linux: `/usr/share/fonts/truetype/ipafont-mincho/ipam.ttf`
- macOS: `/System/Library/Fonts/Hiragino Sans GB.ttc`

### 動画生成が失敗する場合

1. **ライブラリの再インストール**

   ```cmd
   pip uninstall opencv-python Pillow numpy
   pip install opencv-python Pillow numpy
   ```

2. **権限の確認**

   - 書き込み権限があることを確認
   - 十分なディスク容量があることを確認

3. **Python バージョンの確認**
   - Python 3.7 以上が必要

## 生成時間の目安

- **標準的な PC**: 約 10-15 秒
- **高性能 PC**: 約 5-10 秒
- **低性能 PC**: 約 20-30 秒

## カスタマイズ

`elevator_video_generator.py`を編集することで、以下をカスタマイズできます：

- 動画の解像度（`VIDEO_WIDTH`, `VIDEO_HEIGHT`）
- フレームレート（`VIDEO_FPS`）
- 動画時間（`VIDEO_DURATION`）
- エレベーターシナリオ（`ElevatorScenario`クラス）
- 色設定（`TEXT_COLOR_*`定数）

## ファイル構成

```
video/
├── README.md                    # このファイル
├── requirements.txt             # 必要なライブラリ
├── elevator_video_generator.py  # 動画生成プログラム
└── elevator_demo_*.mp4          # 生成された動画ファイル
```

## 動画の活用方法

生成された動画は以下の用途で活用できます：

- **システムデモンストレーション**
- **プレゼンテーション資料**
- **動作確認用サンプル**
- **開発チーム内での共有**
- **クライアントへの説明資料**

## 注意事項

- 動画ファイルは自動的に上書きされません（タイムスタンプ付きファイル名）
- 不要な動画ファイルは手動で削除してください
- 大量の動画生成を行う場合は、ディスク容量にご注意ください

---

**作成者**: エレベーター監視システム開発チーム  
**更新日**: 2025 年 8 月 25 日
